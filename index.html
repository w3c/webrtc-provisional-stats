<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Provisional Identifiers for WebRTC's Statistics API</title>
  <script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove"></script>
  <script class='remove'>
  "use strict";
  // See https://github.com/w3c/respec/wiki/ for how to configure ReSpec
  var respecConfig = {
    "doRDFa": false,
    "format": "markdown",
    // "githubAPI": "https://api.github.com/repos/WICG/webrtc-provisional-stats",
    // "issueBase": "https://www.github.com/WICG/webrtc-provisional-stats/issues/",
    "noLegacyStyle": true,
    "editors": [{
        name: "Henrik Bostr√∂m",
        email: "hbos@google.com",
        company: "Google Inc.",
      },
      {
        name: "Harald Alvestrand",
        email: "hta@google.com",
        company: "Google Inc.",
      },
      // Add additional editors here.
      // https://github.com/w3c/respec/wiki/editors
    ],
    "shortName": "webrtc-provisional-stats",
    "specStatus": "unofficial",
    "subjectPrefix": "[webrtc-provisional-stats]",
    "group": "webrtc",
    "github": "https://github.com/w3c/webrtc-provisional-stats/"
  };
  </script>
</head>

<body>
  <section id="abstract">
    <p>
      TODO(hbos): Fill in.
    </p>
  </section>
  <section id="sotd">
    <p>
      This is an unofficial proposal.
    </p>
  </section>
  <section id="introduction">
    <h2>Introduction</h2>
    <p>
      See <a href="https://github.com/w3c/respec/wiki/User's-Guide">ReSpec's
      user guide</a> for how to get started!
    </p>
  </section>
  <section id="RTCOutboundRtpStreamStats-dict*">
    <h3>
      <dfn>RTCOutboundRtpStreamStats</dfn> dictionary non-standardized members
    </h3>
    <pre class="idl">partial dictionary RTCOutboundRtpStreamStats {
      DOMString  contentType;
};</pre>
    <dl data-link-for="RTCOutboundRtpStreamStats" data-dfn-for="RTCOutboundRtpStreamStats" class=
    "dictionary-members">
      <dt>
        <dfn><code>contentType</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>
      </dt>
      <dd>
        <p>
          This metric exposes the <a href="https://webrtc.org/experiments/rtp-hdrext/video-content-type/" title="video-content-type">video-content-type</a>
          of the last key frame sent. This value is updated every time the last
          packet of a key frame is sent, and it is updated as follows: if this
          packet contained the video-content-type RTP header extension value
          0x00, <code>contentType</code> is <code>"unspecified"</code>, if it is
          0x01, <code>contentType</code> is <code>"screenshare"</code>. In all
          other cases, such as if the header extension is missing, its value is
          invalid or no last packet of a key frame has been sent yet,
          <code>contentType</code> is missing.
        </p>
        </p>
      </dd>
    </dl>
  </section>
  <section id="RTCInboundRtpStreamStats-dict*">
    <h3>
      <dfn>RTCInboundRtpStreamStats</dfn> dictionary non-standardized members
    </h3>
    <pre class="idl">partial dictionary RTCInboundRtpStreamStats {
      DOMString  contentType;
};</pre>
    <dl data-link-for="RTCInboundRtpStreamStats" data-dfn-for="RTCInboundRtpStreamStats" class=
    "dictionary-members">
      <dt>
        <dfn><code>contentType</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>
      </dt>
      <dd>
        <p>
          This metric exposes the <a href="https://webrtc.org/experiments/rtp-hdrext/video-content-type/" title="video-content-type">video-content-type</a>
          of the last key frame received. This value is updated every time the
          last packet of a key frame is received, and it is updated as follows:
          if this packet contained the video-content-type RTP header extension
          value 0x00, <code>contentType</code> is <code>"unspecified"</code>, if
          it is 0x01, <code>contentType</code> is <code>"screenshare"</code>. In
          all other cases, such as if the header extension is missing, its value
          is invalid or no last packet of a key frame has been received yet,
          <code>contentType</code> is missing.
        </p>
        </p>
      </dd>
    </dl>
  </section>
  <section id="RTCAudioReceiverStats-dict*">
    <h3>
      <dfn>RTCAudioReceiverStats</dfn> dictionary non-standardized members
    </h3>
    <pre class="idl">partial dictionary RTCAudioReceiverStats {
      unsigned long long jitterBufferFlushes;
};</pre>
    <dl data-link-for="RTCAudioReceiverStats" data-dfn-for="RTCAudioReceiverStats" class=
    "dictionary-members">
      <dt>
        <dfn><code>jitterBufferFlushes</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long-long">unsigned long long</a></span>
      </dt>
      <dd>
        <p>
          Experimental stat which is available <a href="https://docs.google.com/document/d/1stYIZhEmDZ7NJF9gjjsM66eLFJUdc-14a3QutrFbIwI/edit#" title="experiment description">under origin trial in Chromium starting from M72 version</a>.
          Counts the total number of times the jitter buffer
          reaches its maximum capacity and gets flushed.
        </p>
      </dd>
    </dl>
  </section>
  <section id="RTCVideoReceiverStats-dict*">
    <h3>
      <dfn>RTCVideoReceiverStats</dfn> dictionary non-standardized members
    </h3>
    <pre class="idl">partial dictionary RTCVideoReceiverStats {
      unsigned long freezeCount;
      unsigned long pauseCount;
      double totalFreezesDuration;
      double totalPausesDuration;
      double totalFramesDuration;
      double sumOfSquaredFramesDuration;
};</pre>
    <dl data-link-for="RTCVideoReceiverStats" data-dfn-for="RTCVideoReceiverStats" class=
    "dictionary-members">
      <dt>
        <dfn><code>freezeCount</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>
      </dt>
      <dd>
        <p>
          Count the total number of video freezes experienced by this receiver.
          It is a freeze if frame duration, which is time interval between two
          consecutively rendered frames, is equal or exceeds
          Max(3 * avg_frame_duration_ms, avg_frame_duration_ms + 150), where
          avg_frame_duration_ms is linear average of durations of last 30 rendered
          frames.
        </p>
      </dd>
      <dt>
        <dfn><code>pauseCount</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>
      </dt>
      <dd>
        <p>
          Count the total number of video pauses experienced by this receiver.
          Video is considered to be paused if time passed since last received
          packet exceeds 5 seconds.
        </p>
      </dd>
      <dt>
        <dfn><code>totalFreezesDuration</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-double">double</a></span>
      </dt>
      <dd>
        <p>
          Total duration of rendered frames which are considered as frozen (for
          definition of freeze see <a>freezeCount</a>), in seconds. This value
          is updated when a frame is rendered.
        </p>
      </dd>
      <dt>
        <dfn><code>totalPausesDuration</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-double">double</a></span>
      </dt>
      <dd>
        <p>
          Total duration of pauses (for definition of pause see <a>pauseCount</a>),
          in seconds. This value is updated when a frame is rendered.
        </p>
      </dd>
      <dt>
        <dfn><code>totalFramesDuration</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-double">double</a></span>
      </dt>
      <dd>
        <p>
          Total duration of all rendered video frames, in seconds. This value is
          updated when a frame is rendered.
        </p>
      </dd>
      <dt>
        <dfn><code>sumOfSquaredFramesDuration</code></dfn> of type
        <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned long">double</a></span>
      </dt>
      <dd>
        <p>
          Sum of squared duration of all rendered frames. It can be used to calculate
          harmonic frame rate:
          <p>
            {{ RTCVideoReceiverStats/totalFramesDuration}}<code> / sumOfSquaredFrameDurations</code>
          </p>
          This value is updated when a frame is rendered.
        </p>
      </dd>
    </dl>
  </section>
  <section id="RTCIceServerStats-stat*">
    <h3>
      <dfn>RTCIceServerStats</dfn> dictionary non-standardized members
    </h3>
    <pre class="idl">partial dictionary RTCIceServerStats {
       RTCNetworkType networkType;
};</pre>
    <dl data-link-for="RTCIceServerStats" data-dfn-for="RTCIceServerStats" class="dictionary-members">
      <dt>
        <dfn><code>networkType</code></dfn> of type <span class=
        "idlMemberType"><a>RTCNetworkType</a></span>
      </dt>
      <dd>
        <div class="warning">
          This member is included in this document for historical reasons.
          Additional work is needed to reach consensus on the privacy model.
        </div>
        <p>
          Represents the type of network interface used.
        </p>
      </dd>
    </dl>
  </section>
  <section id="RTCIceCandidateStats-stat*">
    <h3>
      <dfn>RTCIceCandidateStats</dfn> dictionary non-standardized members
    </h3>
    <pre class="idl">partial dictionary RTCIceCandidateStats {
       RTCNetworkType networkType;
};</pre>
    <dl data-link-for="RTCIceCandidateStats" data-dfn-for="RTCIceCandidateStats" class="dictionary-members">
      <dt>
        <dfn><code>networkType</code></dfn> of type <span class=
        "idlMemberType"><a>RTCNetworkType</a></span>
      </dt>
      <dd>
        <div class="warning">
          This member is included in this document for historical reasons.
          Additional work is needed to reach consensus on the privacy model.
        </div>
        <p>
          Represents the type of network interface used by the base of a local candidate
          (the address the ICE agent sends from). Only present for local candidates; it's
          not possible to know what type of network interface a remote candidate is using.
        </p>
        <div class="note">
          This stat only tells you about the network interface used by the first "hop";
          it's possible that a connection will be bottlenecked by another type of network.
          For example, when using Wi-Fi tethering, the <code>networkType</code> of the
          relevant candidate would be <code>"wifi"</code>, even when the next hop is over a
          cellular connection.
        </div>
        <p class="fingerprint">
          This reveals information that would otherwise not be available to web pages,
          which increases the fingerprint surface.
        </p>
      </dd>
    </dl>
  </section>
  <section>
    <h3>
      <dfn>RTCNetworkType</dfn> enum
    </h3>
    <div class="warning">
      This enum is included in this document for historical reasons.
      Additional work is needed to reach consensus on the privacy model.
    </div>
    <div>
      <pre class="idl">
enum RTCNetworkType {
    "bluetooth",
    "cellular",
    "ethernet",
    "wifi",
    "wimax",
    "vpn",
    "unknown"
};</pre>
        <table data-link-for="RTCNetworkType" data-dfn-for="RTCNetworkType" class="simple">
          <tbody>
            <tr>
              <th colspan="2">
                Enumeration description
              </th>
            </tr>
            <tr>
              <td>
                <dfn><code>bluetooth</code></dfn>
              </td>
              <td>
                <p>
                  A Bluetooth connection.
                </p>
              </td>
            </tr>
            <tr>
              <td>
                <dfn><code>cellular</code></dfn>
              </td>
              <td>
                <p>
                  A cellular connection (e.g., EDGE, HSPA, LTE, etc.).
                </p>
              </td>
            </tr>
            <tr>
              <td>
                <dfn><code>ethernet</code></dfn>
              </td>
              <td>
                <p>
                  An Ethernet connection.
                </p>
              </td>
            </tr>
            <tr>
              <td>
                <dfn><code>wifi</code></dfn>
              </td>
              <td>
                <p>
                  A Wi-Fi connection.
                </p>
              </td>
            </tr>
            <tr>
              <td>
                <dfn><code>wimax</code></dfn>
              </td>
              <td>
                <p>
                  A WiMAX connection.
                </p>
              </td>
            </tr>
            <tr>
              <td>
                <dfn><code>vpn</code></dfn>
              </td>
              <td>
                <p>
                  The connection runs over a VPN. The underlying network type is not available.
                </p>
              </td>
            </tr>
            <tr>
              <td>
                <dfn><code>unknown</code></dfn>
              </td>
              <td>
                <p>
                  The user agent is unable or unwilling to identify the underlying connection
                  technology.
                </p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
</body>

</html>
